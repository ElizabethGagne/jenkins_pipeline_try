import jenkins.model.*

node{

    git url: GIT_URL, branch: GIT_BRANCH, credentialsId: 'GitHub_Account_Creds'

    stage('\u2776 Build') {
        echo "\u2776 Build Step"
        sh 'mvn clean compile'
    }
    stage('\u2777 Test'){
        echo "\u2777 Test Step"
        sh 'mvn test'
        //junit '**/target/surefire-reports/TEST-*.xml'
        step([$class: 'JUnitResultArchiver', testResults: '**/target/surefire-reports/TEST-*.xml'])
    }
    stage('\u2778 Deploy Artifact') {
        echo "\u2778 Deploy Step"
        sh 'mvn deploy -DskipTests'
    }
    stage('\u2779 Trigger Downstreams') {
        echo "\u2779 Trigger Downstreams"
        if (DOWNSTREAMS != null) {
            def stepsForParallel = getParallelStepsForDownstreamJobs(DOWNSTREAMS)
            parallel stepsForParallel
        }
    }

}